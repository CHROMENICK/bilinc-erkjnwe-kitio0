import{$ as Y,a as Oe,g as je,b as V,c as X,u as $e,i as v,d as _,t as D,e as G,m as et,f as Re,h as U,j as R,k as L,o as Z,l as le,n as Le,p as xe,s as Ne,q as re,F as ne,S as ae,r as tt,v as Ae,w as M,x as z,y as F,z as rt,A as oe,_ as de,B as Be,C as nt,D as fe,E as at,G as ot,T as st}from"./index-67b95e4d.js";import{F as He}from"./Favicon-92801973.js";import{C as B,r as Te,a as lt,T as K,V as it,k as ct,b as ut}from"./index-597b806a.js";import{n as dt}from"./url-c64a84a7.js";const ye=Symbol("store-raw"),ie=Symbol("store-node");function Ve(e){let r=e[Y];if(!r&&(Object.defineProperty(e,Y,{value:r=new Proxy(e,bt)}),!Array.isArray(e))){const t=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let a=0,o=t.length;a<o;a++){const i=t[a];n[i].get&&Object.defineProperty(e,i,{enumerable:n[i].enumerable,get:n[i].get.bind(r)})}}return r}function ge(e){let r;return e!=null&&typeof e=="object"&&(e[Y]||!(r=Object.getPrototypeOf(e))||r===Object.prototype||Array.isArray(e))}function ce(e,r=new Set){let t,n,a,o;if(t=e!=null&&e[ye])return t;if(!ge(e)||r.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):r.add(e);for(let i=0,l=e.length;i<l;i++)a=e[i],(n=ce(a,r))!==a&&(e[i]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):r.add(e);const i=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let c=0,m=i.length;c<m;c++)o=i[c],!l[o].get&&(a=e[o],(n=ce(a,r))!==a&&(e[o]=n))}return e}function _e(e){let r=e[ie];return r||Object.defineProperty(e,ie,{value:r=Object.create(null)}),r}function we(e,r,t){return e[r]||(e[r]=Fe(t))}function ft(e,r){const t=Reflect.getOwnPropertyDescriptor(e,r);return!t||t.get||!t.configurable||r===Y||r===ie||(delete t.value,delete t.writable,t.get=()=>e[Y][r]),t}function ze(e){if(je()){const r=_e(e);(r._||(r._=Fe()))()}}function gt(e){return ze(e),Reflect.ownKeys(e)}function Fe(e){const[r,t]=X(e,{equals:!1,internal:!0});return r.$=t,r}const bt={get(e,r,t){if(r===ye)return e;if(r===Y)return t;if(r===Oe)return ze(e),t;const n=_e(e),a=n[r];let o=a?a():e[r];if(r===ie||r==="__proto__")return o;if(!a){const i=Object.getOwnPropertyDescriptor(e,r);je()&&(typeof o!="function"||e.hasOwnProperty(r))&&!(i&&i.get)&&(o=we(n,r,o)())}return ge(o)?Ve(o):o},has(e,r){return r===ye||r===Y||r===Oe||r===ie||r==="__proto__"?!0:(this.get(e,r,e),r in e)},set(){return!0},deleteProperty(){return!0},ownKeys:gt,getOwnPropertyDescriptor:ft};function be(e,r,t,n=!1){if(!n&&e[r]===t)return;const a=e[r],o=e.length;t===void 0?delete e[r]:e[r]=t;let i=_e(e),l;if((l=we(i,r,a))&&l.$(()=>t),Array.isArray(e)&&e.length!==o){for(let c=e.length;c<o;c++)(l=i[c])&&l.$();(l=we(i,"length",o))&&l.$(e.length)}(l=i._)&&l.$()}function Ke(e,r){const t=Object.keys(r);for(let n=0;n<t.length;n+=1){const a=t[n];be(e,a,r[a])}}function vt(e,r){if(typeof r=="function"&&(r=r(e)),r=ce(r),Array.isArray(r)){if(e===r)return;let t=0,n=r.length;for(;t<n;t++){const a=r[t];e[t]!==a&&be(e,t,a)}be(e,"length",n)}else Ke(e,r)}function te(e,r,t=[]){let n,a=e;if(r.length>1){n=r.shift();const i=typeof n,l=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)te(e,[n[c]].concat(r),t);return}else if(l&&i==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&te(e,[c].concat(r),t);return}else if(l&&i==="object"){const{from:c=0,to:m=e.length-1,by:w=1}=n;for(let u=c;u<=m;u+=w)te(e,[u].concat(r),t);return}else if(r.length>1){te(e[n],r,[n].concat(t));return}a=e[n],t=[n].concat(t)}let o=r[0];typeof o=="function"&&(o=o(a,t),o===a)||n===void 0&&o==null||(o=ce(o),n===void 0||ge(a)&&ge(o)&&!Array.isArray(o)?Ke(a,o):be(e,n,o))}function We(...[e,r]){const t=ce(e||{}),n=Array.isArray(t),a=Ve(t);function o(...i){V(()=>{n&&i.length===1?vt(t,i[0]):te(t,i)})}return[a,o]}const pt=D('<div class="toolbarbutton-1 flex h-6 cursor-default select-none items-center gap-1 rounded px-1"><div class="h-[15px] w-[15px]">');function mt(e){const{sortable:r,bookmark:t}=e;function n(a){Te(t,a)}return(()=>{const a=pt(),o=a.firstChild;return a.$$contextmenu=i=>{i.data=[new B({text:"Open in new tab",onClick(l){Te(t,l,!0)}}),new B({separator:!0}),new B({text:"Delete",onClick:()=>{lt(t)}}),new B({separator:!0})]},a.$$click=n,$e(r,a,()=>!0),v(o,_(He,{get src(){return X(t.icon||"about:newTab")[0]}})),v(a,()=>t.title,null),a})()}G(["click","contextmenu"]);var ve=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},se=e=>{let r=new ve(e.getBoundingClientRect());const{transform:t}=getComputedStyle(e);return t&&(r=ht(r,t)),r},ht=(e,r)=>{let t,n;if(r.startsWith("matrix3d(")){const a=r.slice(9,-1).split(/, /);t=+a[12],n=+a[13]}else if(r.startsWith("matrix(")){const a=r.slice(7,-1).split(/, /);t=+a[4],n=+a[5]}else t=0,n=0;return new ve({...e,x:e.x-t,y:e.y-n})},H=()=>({x:0,y:0}),ke=(e,r)=>e.x===r.x&&e.y===r.y,me=(e,r)=>new ve({...e,x:e.x+r.x,y:e.y+r.y}),xt=(e,r)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),yt=(e,r)=>{const t=Math.max(e.top,r.top),n=Math.max(e.left,r.left),a=Math.min(e.right,r.right),o=Math.min(e.bottom,r.bottom),i=a-n,l=o-t;if(n<a&&t<o){const c=e.width*e.height,m=r.width*r.height,w=i*l;return w/(c+m-w)}return 0},he=(e,r)=>e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height,qe=(e,r,t)=>{const n=e.transformed.center,a={distance:1/0,droppable:null};for(const o of r){const i=xt(n,o.layout.center);i<a.distance?(a.distance=i,a.droppable=o):i===a.distance&&o.id===t.activeDroppableId&&(a.droppable=o)}return a.droppable},wt=(e,r,t)=>{const n=e.transformed,a={ratio:0,droppable:null};for(const o of r){const i=yt(n,o.layout);i>a.ratio?(a.ratio=i,a.droppable=o):i>0&&i===a.ratio&&o.id===t.activeDroppableId&&(a.droppable=o)}return a.droppable},Ue=Le(),Ye=e=>{const r=et({collisionDetector:wt},e),[t,n]=We({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),a=(s,d,b)=>{s.substring(0,s.length-1),L(()=>t[s][d])&&n(s,d,"transformers",b.id,b)},o=(s,d,b)=>{s.substring(0,s.length-1),L(()=>t[s][d])&&L(()=>t[s][d].transformers[b])&&n(s,d,"transformers",b,void 0)},i=({id:s,node:d,layout:b,data:A})=>{const y=t.draggables[s],x={id:s,node:d,layout:b,data:A,_pendingCleanup:!1};let S;if(!y)Object.defineProperties(x,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return H();const P=Object.values(t.draggables[s].transformers);return P.sort((N,Q)=>N.order-Q.order),P.reduce((N,Q)=>Q.callback(N),H())}},transformed:{enumerable:!0,configurable:!0,get:()=>me(t.draggables[s].layout,t.draggables[s].transform)}});else if(t.active.draggableId===s&&!t.active.overlay){const P={x:y.layout.x-b.x,y:y.layout.y-b.y},N="addDraggable-existing-offset",Q=y.transformers[N],Se=Q?Q.callback(P):P;S={id:N,order:100,callback:Ce=>({x:Ce.x+Se.x,y:Ce.y+Se.y})},q(()=>o("draggables",s,N))}V(()=>{n("draggables",s,x),S&&a("draggables",s,S)}),t.active.draggable&&h()},l=s=>{L(()=>t.draggables[s])&&(n("draggables",s,"_pendingCleanup",!0),queueMicrotask(()=>c(s)))},c=s=>{if(t.draggables[s]?._pendingCleanup){const d=t.active.draggableId===s;V(()=>{d&&n("active","draggableId",null),n("draggables",s,void 0)})}},m=({id:s,node:d,layout:b,data:A})=>{const y=t.droppables[s],x={id:s,node:d,layout:b,data:A,_pendingCleanup:!1};y||Object.defineProperties(x,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const S=Object.values(t.droppables[s].transformers);return S.sort((P,N)=>P.order-N.order),S.reduce((P,N)=>N.callback(P),H())}},transformed:{enumerable:!0,configurable:!0,get:()=>me(t.droppables[s].layout,t.droppables[s].transform)}}),n("droppables",s,x),t.active.draggable&&h()},w=s=>{L(()=>t.droppables[s])&&(n("droppables",s,"_pendingCleanup",!0),queueMicrotask(()=>u(s)))},u=s=>{if(t.droppables[s]?._pendingCleanup){const d=t.active.droppableId===s;V(()=>{d&&n("active","droppableId",null),n("droppables",s,void 0)})}},f=({id:s,activators:d})=>{n("sensors",s,{id:s,activators:d,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[s].coordinates.current.x-t.sensors[s].coordinates.origin.x,y:t.sensors[s].coordinates.current.y-t.sensors[s].coordinates.origin.y}}}})},p=s=>{if(!L(()=>t.sensors[s]))return;const d=t.active.sensorId===s;V(()=>{d&&n("active","sensorId",null),n("sensors",s,void 0)})},g=({node:s,layout:d})=>{const b=t.active.overlay,A={node:s,layout:d};b||Object.defineProperties(A,{id:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([y])=>y!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const y=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return y.sort((x,S)=>x.order-S.order),y.reduce((x,S)=>S.callback(x),H())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?me(t.active.overlay.layout,t.active.overlay.transform):new ve({x:0,y:0,width:0,height:0})}}),n("active","overlay",A)},T=()=>n("active","overlay",null),$=(s,d)=>{V(()=>{n("sensors",s,"coordinates",{origin:{...d},current:{...d}}),n("active","sensorId",s)})},C=s=>{const d=t.active.sensorId;d&&n("sensors",d,"coordinates","current",{...s})},j=()=>n("active","sensorId",null),k=(s,d)=>{const b={};for(const y of Object.values(t.sensors))if(y)for(const[x,S]of Object.entries(y.activators))b[x]??=[],b[x].push({sensor:y,activator:S});const A={};for(const y in b){let x=y;d&&(x=`on${y}`),A[x]=S=>{for(const{activator:P}of b[y]){if(t.active.sensor)break;P(S,s)}}}return A},h=()=>{let s=!1;const d=Object.values(t.draggables),b=Object.values(t.droppables),A=t.active.overlay;return V(()=>{const y=new WeakMap;for(const x of d)if(x){const S=x.layout;y.has(x.node)||y.set(x.node,se(x.node));const P=y.get(x.node);he(S,P)||(n("draggables",x.id,"layout",P),s=!0)}for(const x of b)if(x){const S=x.layout;y.has(x.node)||y.set(x.node,se(x.node));const P=y.get(x.node);he(S,P)||(n("droppables",x.id,"layout",P),s=!0)}if(A){const x=A.layout,S=se(A.node);he(x,S)||(n("active","overlay","layout",S),s=!0)}}),s},I=()=>{const s=t.active.overlay??t.active.draggable;if(s){const d=r.collisionDetector(s,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),b=d?d.id:null;t.active.droppableId!==b&&n("active","droppableId",b)}},O=s=>{const d={id:"sensorMove",order:0,callback:b=>t.active.sensor?{x:b.x+t.active.sensor.coordinates.delta.x,y:b.y+t.active.sensor.coordinates.delta.y}:b};h(),V(()=>{n("active","draggableId",s),a("draggables",s,d)}),I()},E=()=>{const s=L(()=>t.active.draggableId);V(()=>{s!==null&&o("draggables",s,"sensorMove"),n("active",["draggableId","droppableId"],null)}),h()},W=s=>{R(()=>{const d=t.active.draggable;d&&L(()=>s({draggable:d}))})},J=s=>{R(()=>{const d=t.active.draggable;if(d){const b=L(()=>t.active.overlay);Object.values(b?b.transform:d.transform),L(()=>s({draggable:d,overlay:b}))}})},ue=s=>{R(()=>{const d=t.active.draggable,b=t.active.droppable;d&&L(()=>s({draggable:d,droppable:b,overlay:t.active.overlay}))})},q=s=>{R(({previousDraggable:d,previousDroppable:b,previousOverlay:A})=>{const y=t.active.draggable,x=y?t.active.droppable:null,S=y?t.active.overlay:null;return!y&&d&&L(()=>s({draggable:d,droppable:b,overlay:A})),{previousDraggable:y,previousDroppable:x,previousOverlay:S}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};J(()=>I()),r.onDragStart&&W(r.onDragStart),r.onDragMove&&J(r.onDragMove),r.onDragOver&&ue(r.onDragOver),r.onDragEnd&&q(r.onDragEnd);const pe=[t,{addTransformer:a,removeTransformer:o,addDraggable:i,removeDraggable:l,addDroppable:m,removeDroppable:w,addSensor:f,removeSensor:p,setOverlay:g,clearOverlay:T,recomputeLayouts:h,detectCollisions:I,draggableActivators:k,sensorStart:$,sensorMove:C,sensorEnd:j,dragStart:O,dragEnd:E,onDragStart:W,onDragMove:J,onDragOver:ue,onDragEnd:q}];return _(Ue.Provider,{value:pe,get children(){return r.children}})},ee=()=>Re(Ue)||null,$t=(e="pointer-sensor")=>{const[r,{addSensor:t,removeSensor:n,sensorStart:a,sensorMove:o,sensorEnd:i,dragStart:l,dragEnd:c}]=ee(),m=250,w=10;Z(()=>{t({id:e,activators:{pointerdown:T}})}),le(()=>{n(e)});const u=()=>r.active.sensorId===e,f={x:0,y:0};let p=null,g=null;const T=(I,O)=>{I.button===0&&(document.addEventListener("pointermove",j),document.addEventListener("pointerup",k),g=O,f.x=I.clientX,f.y=I.clientY,p=window.setTimeout(C,m))},$=()=>{p&&(clearTimeout(p),p=null),document.removeEventListener("pointermove",j),document.removeEventListener("pointerup",k),document.removeEventListener("selectionchange",h)},C=()=>{r.active.sensor?u()||$():(a(e,f),l(g),h(),document.addEventListener("selectionchange",h))},j=I=>{const O={x:I.clientX,y:I.clientY};if(!r.active.sensor){const E={x:O.x-f.x,y:O.y-f.y};Math.sqrt(E.x**2+E.y**2)>w&&C()}u()&&(I.preventDefault(),o(O))},k=I=>{$(),u()&&(I.preventDefault(),c(),i())},h=()=>{window.getSelection()?.removeAllRanges()}},Xe=e=>($t(),U(()=>e.children)),Ie=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),_t=(e,r={})=>{const[t,{addDraggable:n,removeDraggable:a,draggableActivators:o}]=ee(),[i,l]=X(null);Z(()=>{const u=i();u&&n({id:e,node:u,layout:se(u),data:r})}),le(()=>a(e));const c=()=>t.active.draggableId===e,m=()=>t.draggables[e]?.transform||H();return Object.defineProperties((u,f)=>{const p=f?f():{};R(()=>{const g=i(),T=o(e);if(g)for(const $ in T)g.addEventListener($,T[$]);le(()=>{if(g)for(const $ in T)g.removeEventListener($,T[$])})}),l(u),p.skipTransform||R(()=>{const g=m();if(ke(g,H()))u.style.removeProperty("transform");else{const T=Ie(m());u.style.setProperty("transform",T.transform??null)}})},{ref:{enumerable:!0,value:l},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>o(e,!0)},transform:{enumerable:!0,get:m}})},kt=(e,r={})=>{const[t,{addDroppable:n,removeDroppable:a}]=ee(),[o,i]=X(null);Z(()=>{const w=o();w&&n({id:e,node:w,layout:se(w),data:r})}),le(()=>a(e));const l=()=>t.active.droppableId===e,c=()=>t.droppables[e]?.transform||H();return Object.defineProperties((w,u)=>{const f=u?u():{};i(w),f.skipTransform||R(()=>{const p=c();if(ke(p,H()))w.style.removeProperty("transform");else{const g=Ie(c());w.style.setProperty("transform",g.transform??null)}})},{ref:{enumerable:!0,value:i},isActiveDroppable:{enumerable:!0,get:l},transform:{enumerable:!0,get:c}})},It=(e,r,t)=>{const n=e.slice();return n.splice(t,0,...n.splice(r,1)),n},Ge=Le(),Je=e=>{const[r]=ee(),[t,n]=We({initialIds:[],sortedIds:[]}),a=l=>l>=0&&l<t.initialIds.length;R(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),R(()=>{r.active.draggableId&&r.active.droppableId?L(()=>{const l=t.sortedIds.indexOf(r.active.draggableId),c=t.initialIds.indexOf(r.active.droppableId);if(!a(l)||!a(c))n("sortedIds",[...e.ids]);else if(l!==c){const m=It(t.sortedIds,l,c);n("sortedIds",m)}}):n("sortedIds",[...e.ids])});const i=[t,{}];return _(Ge.Provider,{value:i,get children(){return e.children}})},Dt=()=>Re(Ge)||null,St=(e,r)=>t=>{e(t),r(t)},Qe=(e,r={})=>{const[t,{addTransformer:n,removeTransformer:a}]=ee(),[o]=Dt(),i=_t(e,r),l=kt(e,r),c=St(i.ref,l.ref),m=()=>o.initialIds.indexOf(e),w=()=>o.sortedIds.indexOf(e),u=$=>t.droppables[$]?.layout||null,f=()=>{const $=H(),C=m(),j=w();if(j!==C){const k=u(e),h=u(o.initialIds[j]);k&&h&&($.x=h.x-k.x,$.y=h.y-k.y)}return $},p={id:"sortableOffset",order:100,callback:$=>{const C=f();return{x:$.x+C.x,y:$.y+C.y}}};Z(()=>n("droppables",e,p)),le(()=>a("droppables",e,p.id));const g=()=>(e===t.active.draggableId&&!t.active.overlay?t.draggables[e]?.transform:t.droppables[e]?.transform)||H();return Object.defineProperties($=>{i($,()=>({skipTransform:!0})),l($,()=>({skipTransform:!0})),R(()=>{const C=g();if(ke(C,H()))$.style.removeProperty("transform");else{const j=Ie(g());$.style.setProperty("transform",j.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:g},isActiveDraggable:{enumerable:!0,get:()=>i.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>i.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>l.isActiveDroppable}})};function Ze(){const[,{onDragStart:e,onDragEnd:r,addTransformer:t,removeTransformer:n}]=ee(),a={id:"constrain-y-axis",order:100,callback:o=>({...o,y:0})};return e(({draggable:o})=>{t("draggables",o.id,a)}),r(({draggable:o})=>{n("draggables",o.id,a.id)}),[]}const Ct=D('<div id="PersonalToolbar" class="flex h-7 w-full items-center gap-2 px-2 text-[11px]">');function Ot(){const e=({draggable:t,droppable:n})=>{if(t.node.classList.remove("z-20"),t&&n){const a=re(),o=a.findIndex(l=>l.id===t.id),i=a.findIndex(l=>l.id===n.id);if(o!==i){const l=a.slice();l.splice(i,0,...l.splice(o,1)),tt(l)}}},r=({draggable:t})=>t.node.classList.add("z-20");return _(ae,{get when(){return xe()},get children(){const t=Ct();return t.$$contextmenu=n=>{n.data||(n.data=[]),n.data.push(new B({text:"Hide bookmarks",onClick:()=>{Ne(!1)}}))},v(t,_(Ye,{onDragEnd:e,onDragStart:r,collisionDetector:qe,get children(){return[_(Ze,{}),_(Xe,{}),_(Je,{get ids(){return re().map(n=>n.id)},get children(){return _(ne,{get each(){return re()},children:n=>{const a=Qe(n.id);return _(mt,{sortable:a,bookmark:n})}})}})]}})),t}})}G(["contextmenu"]);const At=D("<div>"),Tt=D('<div class="flex h-full w-full items-center justify-center"><div class="top-50 left-50 relative min-w-[408px] flex-none rounded-lg bg-[#42414d] py-4 px-3 text-[#fbfbfe]"><div class="mb-2 select-none font-semibold"><i class="fa-light fa-globe mr-2"></i><span></span></div><div class="flex justify-end">'),Et=D('<p class="">'),Mt=D("<button>");function Pt(){return(()=>{const e=At();return v(e,_(ne,{get each(){return Ae()},children:r=>_(ae,{get when(){return r.linkedTab===M()},get children(){const t=Tt(),n=t.firstChild,a=n.firstChild,o=a.firstChild,i=o.nextSibling,l=a.nextSibling;return v(i,()=>r.linkedTab.url().replace(/^https?:\/\/.*?\/(.*)$/,(c,m)=>c.replace(m,""))||"about:newTab"),v(n,_(ne,{get each(){return r.components.filter(c=>c.type==="text")},children:c=>(()=>{const m=Et();return v(m,()=>c.content),m})()}),l),v(l,_(ne,{get each(){return r.components.filter(c=>c.type==="button")},children:c=>(()=>{const m=Mt();return m.$$click=()=>{r.close(),r.emit(c.id)},v(m,()=>c.text),z(()=>F(m,`m-1 rounded  py-[7px] px-[15px] font-semibold focus:outline focus:outline-[1.6px] focus:outline-offset-2 focus:outline-[#00ddff] ${c.style===0?"bg-[#00ddff] text-[#2b2a33]":"bg-[rgba(251,251,254,0.07)]"}`)),m})()})),t}})})),z(()=>F(e,`absolute top-0 left-0 z-20 h-full w-full bg-[rgba(28,27,34,0.45)] text-[12px] ${Ae().filter(r=>r.linkedTab===M()).length?"":"hidden"}`)),e})()}G(["click"]);const jt=D('<div class="h-4 w-4 overflow-hidden"><div id="tab-throbber" class="h-4 w-[960px]">'),Rt=D("<div>"),Lt=D('<i class="fa-regular fa-volume mt-[2px] text-[10px]">'),Nt=D('<div id="tab-background"><div class="h-4 w-4"></div><div><p class="w-full text-clip whitespace-nowrap text-xs font-light" style="-webkit-mask-image:linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);mask-image:linear-gradient(90deg, #000 0%, #000 calc(100% - 24px), transparent);"></p></div><div><i class="fa-light fa-xmark mt-[2px] text-[10px]">');function Bt(e){const{sortable:r}=e;return(()=>{const t=Nt(),n=t.firstChild,a=n.nextSibling,o=a.firstChild,i=a.nextSibling;return t.$$contextmenu=l=>{l.data=[new B({text:"New tab",onClick:()=>{new K("about:newTab",!0)}}),new B({separator:!0}),new B({text:"Reload",onClick:()=>{e.tab.reload()}}),new B({text:"Duplicate",onClick:()=>{new K(e.tab.url(),!0)}}),new B({separator:!0}),new B({text:"Close",onClick:()=>{e.tab.close()}})]},t.$$mousedown=l=>{l.button===0&&(e.tab.focus=!0)},$e(r,t,()=>!0),v(n,_(ae,{get when(){return e.tab.loading()},get children(){return jt()}}),null),v(n,_(ae,{get when(){return!e.tab.loading()},get children(){const l=Rt();return v(l,_(He,{get src(){return e.tab.icon}})),z(()=>F(l,`h-full w-full ${e.tab.small()&&e.tab.focus()?"hidden":""}`)),l}}),null),v(t,_(ae,{get when(){return e.tab.playing()},get children(){return Lt()}}),a),v(o,()=>e.tab.title()),i.$$mousedown=l=>l.stopPropagation(),rt(i,"click",e.tab.close.bind(e.tab),!0),z(l=>{const c=`h-9 ${e.tab.pinned()||e.tab.small()?"":"w-48"} shadow-inner-lg  flex items-center gap-[5px] overflow-hidden rounded p-2 pr-1 text-sm`,m=e.tab.focus(),w=`flex-1 overflow-hidden ${e.tab.small()||e.tab.pinned()?"hidden":""}`,u=`close-icon flex h-6 w-6 items-center justify-center rounded hover:bg-opacity-50 ${e.tab.small()&&!e.tab.focus()||e.tab.pinned()?"hidden":""}`;return c!==l._v$&&F(t,l._v$=c),m!==l._v$2&&oe(t,"data-active",l._v$2=m),w!==l._v$3&&F(a,l._v$3=w),u!==l._v$4&&F(i,l._v$4=u),l},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}G(["mousedown","contextmenu","click"]);const Ht=D('<div class="flex" id="tabs" style="width:env(titlebar-area-width, 100%);min-height:env(titlebar-area-height, auto);margin-left:env(titlebar-area-x, 0);"><div class="flex h-11 w-full cursor-default select-none items-center gap-1 overflow-hidden px-[2px]"><div class="flex items-center justify-center" id="opentab"><div class="toolbarbutton-1 flex h-9 w-9 items-center justify-center rounded"><i class="fa-regular fa-plus mt-[2px] text-xs">');function Vt(){const e=({draggable:n,droppable:a})=>{if(n.node.classList.remove("z-20"),n&&a){const o=fe(),i=o.findIndex(c=>c.id===n.id),l=o.findIndex(c=>c.id===a.id);if(i!==l){const c=o.slice();c.splice(l,0,...c.splice(i,1)),at(c)}}},r=({draggable:n})=>n.node.classList.add("z-20");Z(async()=>{await de(()=>import("./registerProtocols-38533446.js"),["assets/registerProtocols-38533446.js","assets/index-597b806a.js","assets/index-67b95e4d.js","assets/index-245ee21e.css","assets/url-c64a84a7.js"]);const a=new URLSearchParams(window.location.search).get("url"),o=JSON.parse(localStorage.getItem("tabs")||"[]");if(a)new K(a,!0),window.history.replaceState({},document.title,"/");else if(o.length&&Be()["general.startup.openPreviousTabs"]){const i=parseInt(localStorage.getItem("activeTab")||"0");o.forEach(c=>{new K(c,!1)});const l=Array.from(nt())[i];l&&(l.focus=!0)}else new K("about:newTab",!0)});function t(){new K("about:newTab",!0)}return(()=>{const n=Ht(),a=n.firstChild,o=a.firstChild,i=o.firstChild;return v(a,_(Ye,{onDragEnd:e,onDragStart:r,collisionDetector:qe,get children(){return[_(Ze,{}),_(Xe,{}),_(Je,{get ids(){return fe().map(l=>l.id)},get children(){return _(ne,{get each(){return fe()},children:l=>{const c=Qe(l.id);return _(Bt,{sortable:c,tab:l})}})}})]}}),o),i.$$click=t,n})()}G(["click"]);const zt=D('<div><div class="flex grow flex-row items-center"></div><div>'),Ft=D('<i class="fa-light fa-chevron-right">'),Kt=D('<hr class="my-1">'),Wt=D('<div class="appmenu-separator-title my-1 select-none px-2 text-xs">'),qt=D("<div>"),Ut=D('<div class="relative bottom-0.5 flex h-10 cursor-default select-none flex-row items-center justify-center"><div class="absolute left-0 flex h-full w-8 items-center"><div class="popup-button flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-chevron-left"></i></div></div><div class="flex h-full flex-row items-center"><div class="flex h-full flex-row items-center justify-center font-bold"></div></div> '),Yt=D('<div class="popup absolute top-9 right-0.5 z-30 grid w-72 grid-cols-[1fr] rounded-lg border px-2 py-2 text-[0.9rem]">'),Xt=D('<div class="fixed top-0 left-0 h-full w-full">');function Gt(e){let r=X(null),t=[],n=(f,p,g,T=()=>{},$="")=>(()=>{const C=zt(),j=C.firstChild,k=j.nextSibling;return C.$$click=h=>{f&&(T(h)??!0)&&w()},F(C,`popup-button flex h-8 w-full cursor-default select-none flex-row items-center rounded px-2 pt-[0.15rem] text-[12px] ${$}`),oe(C,"data-disabled",!f),v(j,p),v(k,g),C})(),a=Object.fromEntries(e.map(f=>[f,X(null)])),o=(f,p,g)=>n(f,p,Ft(),()=>(t.push(g),r[1](g),!1)),i=(f,p,g)=>n(f,p,Velocity.getKeybind(g)?.toString(),()=>{w(),Velocity.getKeybind(g)?.callback()}),l=(f=null)=>[Kt(),f!==null?(()=>{const p=Wt();return v(p,f),p})():[]],c=(f,...p)=>(()=>{const g=qt();return v(g,p),z(()=>F(g,`col-start-1 row-start-1 flex h-full w-full flex-col ${r[0]()===f?"":"hidden"}`)),g})(),m=f=>[(()=>{const p=Ut(),g=p.firstChild,T=g.firstChild,$=g.nextSibling,C=$.firstChild;return T.$$click=()=>{t.pop(),r[1](t[t.length-1])},v(C,f),p})(),U(l)];function w(){r[1](null),t=["main"]}let u=(()=>{const f=Yt();return v(f,()=>Object.values(a).map(p=>p[0]())),f})();return{container:u,element:U((()=>{const f=U(()=>r[0]()!==null);return()=>f()?[(()=>{const p=Xt();return p.$$pointerdown=()=>w(),p})(),u]:null})()),close:w,current:r,stack:t,submenus:a,Menu:c,MenuItem:n,KeybindMenuItem:i,SubmenuMenuItem:o,MenuSeparator:l,SubmenuHeader:m}}G(["click","pointerdown"]);const Ee=D('<div class="grow"><div class="h-full w-full">'),Me=D('<div class="mb-0.5 mr-2 flex h-4 w-4 flex-row items-center"><img>'),Pe=D("<div>"),Jt=D('<div class="flex h-10 w-full items-center gap-2 p-2" id="browser-toolbar"><div class="flex items-center gap-1"><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-arrow-left mt-[2px]"></i></div><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-arrow-right mt-[2px]"></i></div><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i></i></div></div><div class="flex h-[32px] flex-1 items-center rounded text-sm" id="urlbar"><div class="mx-[2px] flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-magnifying-glass mt-[2px]"></i></div><input id="url_bar" autocomplete="off" class="flex h-full flex-1 items-center rounded bg-transparent text-sm leading-8 focus:outline-none"></div><div class="flex items-center gap-1"><a target="_blank" aria-label="View source code on GitHub." href="https://github.com/cohenerickson/Velocity" class="cursor-default"><div class="toolbarbutton-1 flex h-8 w-8 items-center justify-center rounded"><i class="fa-brands fa-github mt-[2px] text-sm"></i></div></a><div class="toolbarbutton-1 relative flex h-8 w-8 items-center justify-center rounded"><i class="fa-light fa-bars mt-[2px] text-sm">');function Qt(){function e(){M()?.loading()?M()?.stop():(M().search=!1,M()?.reload())}function r(){M().search=!1,M()?.goForward()}function t(){M().search=!1,M()?.goBack()}function n(k){k.addEventListener("keydown",h=>{h.key==="Enter"?(h.preventDefault(),k.value&&(M()?.navigate(k.value),M().search=!1,k.blur())):h.key==="Escape"?(M().search=!1,k.blur()):setTimeout(()=>M().search=k.value,0)})}let{element:a,container:o,close:i,current:l,stack:c,submenus:m,Menu:w,MenuItem:u,KeybindMenuItem:f,SubmenuMenuItem:p,MenuSeparator:g,SubmenuHeader:T}=Gt(["main","bookmarks","history","tools","help","recentTabs","recentWindows"]);R(()=>{m.main[1](w("main",f(!0,"New tab",{alias:"new_tab"}),f(!1,"New window",{alias:"new_window"}),g(),p(!0,"Bookmarks","bookmarks"),p(!0,"History","history"),f(!1,"Downloads",{alias:"open_downloads"}),u(!1,"Passwords",null,()=>{}),f(!1,"Add-ons and themes",{alias:"open_addons"}),g(),f(!1,"Print...",{alias:"print_page"}),f(!1,"Save page as...",{alias:"save_page"}),f(!1,"Find in page...",{alias:"search_page"}),u(!1,"Zoom",null,()=>{}),g(),u(!0,"Settings",null,()=>new K("about:preferences",!0)),p(!0,"More tools","tools"),p(!1,"Help","help"),g(),u(!1,"Quit",null,()=>{})))}),R(()=>{m.bookmarks[1](w("bookmarks",T("Bookmarks"),(()=>{const k=Ee(),h=k.firstChild;return v(h,()=>f(!0,"Bookmark current tab",{alias:"bookmark_tab"}),null),v(h,()=>u(!1,"Search bookmarks",null,()=>{}),null),v(h,()=>u(!0,U(()=>xe()?"Hide bookmarks toolbar":"Show bookmarks toolbar"),null,()=>{Ne(!xe())}),null),v(h,()=>g("Recent Bookmarks"),null),v(h,(()=>{const I=U(()=>re().length>0);return()=>I()?re().map(O=>u(!0,[(()=>{const E=Me(),W=E.firstChild;return z(()=>oe(W,"src",O.icon)),E})(),(()=>{const E=Pe();return v(E,()=>O.title),E})()],null,()=>new window.parent.Velocity.Tab(O.url,!0))):u(!1,"(Empty)",null,()=>{},"pointer-events-none")})(),null),k})(),g(),u(!0,"Manage Bookmarks",null,()=>new K("about:bookmarks",!0))))});const $=864e5,C=10;let j=X([]);return R(()=>{l[0]()==="history"&&it.history.get().then(k=>{let h=Date.now();j[1](k.filter(I=>Math.abs(h-I.timestamp)<=$).sort((I,O)=>O.timestamp-I.timestamp).slice(0,C))}),m.history[1](w("history",T("History"),(()=>{const k=Ee(),h=k.firstChild;return v(h,()=>p(!1,"Recently closed tabs","recentTabs"),null),v(h,()=>p(!1,"Recently closed windows","recentWindows"),null),v(h,()=>u(!1,"Restore previous session",null,()=>{}),null),v(h,g,null),v(h,()=>u(!1,"Clear Recent History",null,()=>{}),null),v(h,()=>g("Recent History"),null),v(h,(()=>{const I=U(()=>j[0]().length>0);return()=>I()?j[0]().map(O=>u(!0,[(()=>{const E=Me(),W=E.firstChild;return z(()=>oe(W,"src",O.favicon)),E})(),(()=>{const E=Pe();return v(E,()=>O.title),E})()],null,()=>new window.parent.Velocity.Tab(O.url,!0))):u(!1,"(Empty)",null,()=>{},"pointer-events-none")})(),null),k})(),g(),u(!0,"Manage History",null,()=>new K("about:history",!0))))}),R(()=>{m.tools[1](w("tools",T("More Tools"),u(!1,"Customize toolbar...",null,()=>{}),g("Browser tools"),f(!0,"Web Developer Tools",{alias:"open_devtools"}),u(!1,"Task Manager",null,()=>{}),u(!1,"Remote Debugging",null,()=>{}),u(!1,"Browser Console",null,()=>{}),u(!1,"Responsive Debugging",null,()=>{}),u(!1,"Eyedropper",null,()=>{}),f(!0,"Page Source",{alias:"view_source"}),u(!1,"Extensions for developers",null,()=>{})))}),(()=>{const k=Jt(),h=k.firstChild,I=h.firstChild,O=I.nextSibling,E=O.nextSibling,W=E.firstChild,J=h.nextSibling,ue=J.firstChild,q=ue.nextSibling,De=J.nextSibling,pe=De.firstChild,s=pe.nextSibling;s.firstChild,I.$$click=t,O.$$click=r,E.$$click=e;const d=n;return typeof d=="function"?$e(d,q):n=q,s.$$click=b=>{o.contains(b.target)||(l[1](A=>A===null?"main":null),c.push("main"))},v(s,a,null),z(b=>{const A=`fa-light ${M()?.loading()?"fa-xmark":"fa-rotate-right"} mt-[2px]`,y=`Search with ${ot[Be()["search.defaults.searchEngine"]||"google"].name} or enter address`;return A!==b._v$&&F(W,b._v$=A),y!==b._v$2&&oe(q,"placeholder",b._v$2=y),b},{_v$:void 0,_v$2:void 0}),z(()=>q.value=M()?.search()!==!1?M()?.search():dt(M()?.url()||"")),k})()}G(["click"]);const Zt=D('<main class="flex h-full flex-col overflow-hidden"><div id="navigator-toolbox-background"><div id="navigator-toolbox"></div></div><main id="content" class="relative w-full flex-1 bg-white">');function ar(){return Z(async()=>{await de(()=>import("./registerKeybinds-098e9e4e.js"),["assets/registerKeybinds-098e9e4e.js","assets/index-67b95e4d.js","assets/index-245ee21e.css","assets/index-597b806a.js","assets/url-c64a84a7.js"]),await de(()=>import("./addonStoreModifier-5071daf8.js"),["assets/addonStoreModifier-5071daf8.js","assets/index-597b806a.js","assets/index-67b95e4d.js","assets/index-245ee21e.css","assets/url-c64a84a7.js"]),await de(()=>import("./index-597b806a.js").then(e=>e.i),["assets/index-597b806a.js","assets/index-67b95e4d.js","assets/index-245ee21e.css","assets/url-c64a84a7.js"]),window.addEventListener("keydown",ct),addEventListener("beforeunload",e=>{const r=JSON.parse(localStorage.getItem("preferences")||"{}");if(fe().length>1&&r["general.tabs.confirmBeforeClosing"])return e.preventDefault(),e.returnValue="Confirm before closing multiple tabs"},{capture:!0})}),(()=>{const e=Zt(),r=e.firstChild,t=r.firstChild,n=r.nextSibling;return v(e,_(st,{children:"Velocity"}),r),v(t,_(Vt,{}),null),v(t,_(Qt,{}),null),v(t,_(Ot,{}),null),v(e,_(ut,{}),n),v(n,_(Pt,{})),e})()}export{ar as default};
